import time
import gc

terminator:bytes = "\r\n".encode()
ProcessBuffer = bytearray(b'\x00\x00\x00\x80\x00\x80\x00\x80\x00\x80\r\n\x88\x00\x00\x80\x00\x80\x00\x80\x00\x80\r\n\x00\x00\x00\x80\x00\x80\x00\x80\x00\x80\r\n\x00\x00\x00\x80\x00\x80\x00\x80\x00\x80\r\n\x00\x00\x00\x80\x00\x80\x00\x80\x00\x80\r\n\x00\x00\x00\x80\x00\x80\x00\x80\x00\x80\r\n\x00\x00\x00\x80\x00\x80\x00\x80\x00\x80\r\n\x00\x00\x00\x80\x00\x80\x00\x80\x00\x80\r\n\x00\x00\x00\x80\x00\x80\x00\x80\x00\x80\r\n\x00\x00\x00\x80\x00\x80\x00\x80\x00\x80\r\n\x00\x00\x00\x80\x00\x80\x00\x80\x00\x80\r\n\x00\x00\x00\x80\x00\x80\x00\x80\x00\x80\r\n\x00\x00\x00\x80\x00\x80\x00\x80\x00\x80\r\n\x00\x00\x00\x80\x00\x80\x00\x80\x00\x80\r\n\x00\x00\x00\x80\x00\x80\x00\x80\x00\x80\r\n\x00\x00\x00\x80\x00\x80\x00\x80\x00\x80\r\n\x00\x00\x00\x80\x00\x80\x00\x80\x00\x80\r\n\x00\x00\x00\x80\x00\x80\x00\x80\x00\x80\r\n\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00')
ProcessBufferMV = memoryview(ProcessBuffer)

TerminatorLoc:int = ProcessBuffer.find(terminator)
NewDataStarts:int = TerminatorLoc + 2

NumberOfBytesToMove:int = len(ProcessBuffer) - NewDataStarts
print("Gotta move " + str(NumberOfBytesToMove))

# demonstrate move
# ~258 us

print("Before move: ")
print(str(ProcessBuffer))
mem1 = gc.mem_free()
ProcessBufferMV[0:NumberOfBytesToMove] = ProcessBufferMV[NewDataStarts:NewDataStarts + NumberOfBytesToMove]
mem2 = gc.mem_free()
print("Mem used: " + str(mem1 - mem2))
print("After move: ")
print(str(ProcessBuffer))
